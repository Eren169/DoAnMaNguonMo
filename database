CREATE DATABASE QuanLiKho;

USE QuanLiKho;

CREATE TABLE HangHoa (
  IDHangHoa INT PRIMARY KEY AUTO_INCREMENT,
  TenHangHoa VARCHAR(255) NOT NULL,
  MoTa VARCHAR(255),
  GiaBan DECIMAL(10,2) NOT NULL,
  SoLuongTonKho INT NOT NULL
);

CREATE TABLE NhanVien (
  IDNhanVien INT PRIMARY KEY AUTO_INCREMENT,
  TenNhanVien VARCHAR(255) NOT NULL,
  DiaChi VARCHAR(255),
  SoDienThoai VARCHAR(255),
  Password VARCHAR(255) NOT NULL
);

CREATE TABLE DonVi (
  IDDonVi INT PRIMARY KEY AUTO_INCREMENT,
  TenDonVi VARCHAR(255) NOT NULL,
  SoDienThoai VARCHAR(255),
  DiaChi VARCHAR(255)
);

CREATE TABLE NhaCungCap (
  IDNCC INT PRIMARY KEY AUTO_INCREMENT,
  TenNhaCungCap VARCHAR(255) NOT NULL,
  DiaChi VARCHAR(255),
  SoDienThoai VARCHAR(255)
);

CREATE TABLE NhapHang (
  IDNhapHang INT PRIMARY KEY AUTO_INCREMENT,
  Ngay DATE NOT NULL,
  IDDonVi INT NOT NULL,
  IDNCC INT NOT NULL,
  TongTien DECIMAL(10,2) NOT NULL,
  CONSTRAINT fk_DonVi FOREIGN KEY (IDDonVi) REFERENCES DonVi(IDDonVi),
  CONSTRAINT fk_NhaCungCap FOREIGN KEY (IDNCC) REFERENCES NhaCungCap(IDNCC)
);

CREATE TABLE ChiTietNhapHang (
  IDChiTietNhap INT PRIMARY KEY AUTO_INCREMENT,
  IDNhapHang INT NOT NULL,
  IDHangHoa INT NOT NULL,
  SoLuong INT NOT NULL,
  GiaNhap DECIMAL(10,2) NOT NULL,
  CONSTRAINT fk_NhapHang FOREIGN KEY (IDNhapHang) REFERENCES NhapHang(IDNhapHang),
  CONSTRAINT fk_HangHoa_Nhap FOREIGN KEY (IDHangHoa) REFERENCES HangHoa(IDHangHoa)
);

CREATE TABLE XuatHang (
  IDXuatHang INT PRIMARY KEY AUTO_INCREMENT,
  NgayXuat DATE NOT NULL,
  IDKhachHang INT NOT NULL,
  IDNhanVien INT NOT NULL,
  TongTien DECIMAL(10,2) NOT NULL,
  CONSTRAINT fk_NhanVien FOREIGN KEY (IDNhanVien) REFERENCES NhanVien(IDNhanVien)
);

CREATE TABLE ChiTietXuatHang (
  IDChiTietXuat INT PRIMARY KEY AUTO_INCREMENT,
  IDXuatHang INT NOT NULL,
  IDHangHoa INT NOT NULL,
  SoLuong INT NOT NULL,
  GiaBan DECIMAL(10,2) NOT NULL,
  ThanhTien DECIMAL(10,2) NOT NULL,
  CONSTRAINT fk_XuatHang FOREIGN KEY (IDXuatHang) REFERENCES XuatHang(IDXuatHang),
  CONSTRAINT fk_HangHoa_Xuat FOREIGN KEY (IDHangHoa) REFERENCES HangHoa(IDHangHoa)
);
